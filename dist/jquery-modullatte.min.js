/**
 *
 * jQuery.Modullatte
 * -----------------
 * jQuery-base Simple HTML module kit
 *
 * @version 1.0.0
 * @require jquery.js
 * @author mach3
 * @url http://github.com/mach3/jquery-modullatte
 *
 */

 (function(t){var e=function(){var e=this;e.length=0,e.init=function(){return t("[data-module-src]").each(t.proxy(this.load,this)),this},e.load=function(n,i){var r,a;r=t(i),a=function(n,i){"success"===i&&e.build(n.responseText,r),e.length--,e.length||t(document).trigger("moduleload")},this.length+=1,t.ajax({url:r.data("moduleSrc"),complete:a})},e.build=function(t,n){var i,r;i=this.getDir(n.data("moduleSrc")),r=function(t,n,r,a,o){return a.match(/^(\/|http:\/\/|https:\/\/)/)||(a=e.normalizePath(i+a)),n+a+o},t=t.replace(/((src|href)=\")(.+?)(\")/g,r),this.append(t,n)},e.append=function(e,n){var i,r;i=t("<div>").css("display","none").html(e),r=i.children().hide().insertBefore(n),n.data("moduleFadein")?r.fadeIn():r.show(),i.remove(),n.remove()},e.getDir=function(t){return t.replace(/\?.+?$/,"").replace(/[^\/]*?$/,"")},e.normalizePath=function(e){var n=[];return t.each(e.split("/"),function(t,e){"."!==e&&(".."===e&&n.length&&".."!==n[n.length-1]?n.pop():n.push(e))}),n.join("/")},e.init.apply(this,arguments)};t(function(){t.modullatte=new e})})(jQuery);